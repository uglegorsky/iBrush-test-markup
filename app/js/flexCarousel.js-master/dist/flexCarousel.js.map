{"version":3,"file":"flexCarousel.js","sources":["../src/flexCarousel.js"],"sourcesContent":["/*\n * flexCarousel.js v0.3.0\n * https://github.com/tomhrtly/flexCarousel.js\n *\n * Copyright 2019 Tom Hartley\n * Released under the MIT license\n *\n * Icons provided by Font Awesome: https://fontawesome.com\n */\n\nclass FlexCarousel {\n    constructor(selector, options = {}) {\n        this.selectorName = selector.toString();\n        this.selector = document.querySelector(selector);\n\n        this.defaults = {\n            appendArrows: this.selector,\n            arrows: true,\n            arrowsOverlay: true,\n            autoplay: false,\n            autoplaySpeed: 5000,\n            circles: true,\n            circlesOverlay: true,\n            height: null,\n            infinite: true,\n            initialPage: 0,\n            nextButton: '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"angle-right\" class=\"svg-inline--fa fa-angle-right fa-w-8\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z\"></path></svg>',\n            prevButton: '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"angle-left\" class=\"svg-inline--fa fa-angle-left fa-w-8\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z\"></path></svg>',\n            responsive: null,\n            slidesPerPage: 1,\n            slidesScrolling: 1,\n            transition: 'slide',\n            transitionSpeed: 250,\n        };\n\n        this.activeBreakpoint = null;\n        this.autoplayDirection = 'right';\n        this.autoplayTimer = null;\n        this.breakpoints = [];\n        this.options = FlexCarousel.extend(this.defaults, options);\n        this.originalOptions = this.options;\n        this.slideAmount = null;\n        this.slideWidth = null;\n\n        this.currentPage = this.options.initialPage;\n\n        this.init();\n    }\n\n    addTransition() {\n        const slides = this.selector.querySelector('.fc-slides');\n\n        if (this.options.transition === 'slide') {\n            slides.style.transition = `all ${this.options.transitionSpeed}ms ease-in-out 0s`;\n        }\n    }\n\n    animatePage(target) {\n        this.addTransition();\n        this.setTransform(Math.ceil(target));\n\n        new Promise((resolve) => {\n            setTimeout(() => {\n                this.removeTransition();\n                resolve(true);\n            }, this.options.transitionSpeed);\n        }).then(() => this.setTransform(this.getLeftPage(this.currentPage)));\n    }\n\n    autoplay() {\n        let pause = false;\n        let slide;\n\n        if (this.autoplayTimer) {\n            clearInterval(this.autoplayTimer);\n        }\n\n        if (this.options.autoplay) {\n            this.autoplayTimer = setInterval(() => {\n                if (!pause) {\n                    if (!this.options.infinite) {\n                        if (this.autoplayDirection === 'right') {\n                            slide = 'next';\n\n                            if ((this.currentPage + 1) === (this.slideAmount - 1)) {\n                                this.autoplayDirection = 'left';\n                            }\n                        } else if (this.autoplayDirection === 'left') {\n                            slide = 'previous';\n\n                            if (this.currentPage === 1) {\n                                this.autoplayDirection = 'right';\n                            }\n                        }\n                    } else {\n                        slide = 'next';\n                    }\n                    this.movePage(slide);\n                }\n            }, this.options.autoplaySpeed);\n\n            this.selector.addEventListener('mouseenter', () => { pause = true; });\n            this.selector.addEventListener('mouseleave', () => { pause = false; });\n        }\n    }\n\n    buildArrowEvents() {\n        const nextButton = this.options.appendArrows.querySelector('.fc-next');\n        const prevButton = this.options.appendArrows.querySelector('.fc-prev');\n\n        // Move to the next slide when clicking the next arrow\n        nextButton.addEventListener('click', () => {\n            this.movePage('next');\n        });\n\n        // Move to the previous slide when clicking the previous arrow\n        prevButton.addEventListener('click', () => {\n            this.movePage('previous');\n        });\n    }\n\n    buildArrows() {\n        const slides = this.selector.querySelector('.fc-slides');\n        const slide = slides.querySelectorAll('.fc-slide');\n\n        if (this.options.arrows) {\n            // Only show the arrows if there are more slides then slidesPerPage option\n            if (this.options.slidesPerPage < slide.length) {\n                this.selector.classList.add('fc-has-arrows');\n\n                // Create arrow button\n                const nextButton = document.createElement('button');\n                nextButton.classList.add('fc-next', 'fc-button');\n                nextButton.setAttribute('aria-label', 'Next');\n                nextButton.innerHTML = `<span class=\"fc-is-sr-only\">Next</span><span class=\"fc-icon\">${this.options.nextButton}</span>`;\n\n                // Create prev button\n                const prevButton = document.createElement('button');\n                prevButton.classList.add('fc-prev', 'fc-button');\n                prevButton.setAttribute('aria-label', 'Previous');\n                prevButton.innerHTML = `<span class=\"fc-is-sr-only\">Previous</span><span class=\"fc-icon\">${this.options.prevButton}</span>`;\n\n                // Append next arrow to the selector\n                this.options.appendArrows.appendChild(nextButton);\n\n                // Prepend prev arrow to the selector\n                this.options.appendArrows.insertBefore(prevButton, this.options.appendArrows.firstChild);\n\n                // Add the overlay class if needed\n                if (this.options.arrowsOverlay) {\n                    this.selector.classList.add('fc-has-arrows-overlay');\n                }\n\n                this.buildArrowEvents();\n                this.updateArrows();\n            }\n        }\n    }\n\n    buildBreakpointEvent() {\n        let timer;\n\n        window.addEventListener('resize', () => {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                this.updateResponsive();\n            }, 500);\n        });\n    }\n\n    buildBreakpoints() {\n        const breakpoints = [];\n\n        if (this.options.responsive) {\n            let previous = this.options;\n\n            this.options.responsive.forEach(({ breakpoint, options }) => {\n                if (!breakpoints.includes(breakpoint)) {\n                    breakpoints.push(breakpoint);\n\n                    this.breakpoints[breakpoint] = FlexCarousel.extend(previous, options);\n                    previous = FlexCarousel.extend(previous, options);\n                }\n            });\n        }\n\n        this.buildBreakpointEvent();\n        this.updateResponsive(false);\n    }\n\n    buildCircleEvents() {\n        const circles = this.selector.querySelector('.fc-container').querySelectorAll('.fc-circle');\n\n        circles.forEach((element, index) => {\n            element.addEventListener('click', () => this.movePage(index));\n        });\n    }\n\n    buildCircles() {\n        if (this.options.circles) {\n            // Only show the arrows if there are more slides then slidesPerPage option\n            if (this.options.slidesPerPage < this.slideAmount) {\n                this.selector.classList.add('fc-has-circles');\n\n                // Create circles container\n                const circles = document.createElement('ul');\n                circles.classList.add('fc-circles');\n\n                this.selector.querySelector('.fc-container').appendChild(circles);\n\n                const option = this.options.slidesPerPage > this.options.slidesScrolling ? this.options.slidesScrolling : this.options.slidesPerPage;\n                const amount = Math.ceil(this.slideAmount / option);\n\n                for (let index = 0; index < amount; index += 1) {\n                    const li = document.createElement('li');\n\n                    const circle = document.createElement('button');\n                    circle.classList.add('fc-circle', 'fc-button');\n                    circle.setAttribute('aria-label', `${FlexCarousel.suffix(index + 1)} page`);\n\n                    const icon = document.createElement('span');\n                    icon.classList.add('fc-icon', 'fc-is-circle');\n\n                    const text = document.createElement('span');\n                    text.classList.add('fc-is-sr-only');\n                    text.innerHTML = index + 1;\n\n                    circle.appendChild(icon);\n                    circle.appendChild(text);\n                    li.appendChild(circle);\n                    circles.appendChild(li);\n                }\n\n                if (this.options.circlesOverlay) {\n                    this.selector.classList.add('fc-has-circles-overlay');\n                }\n\n                this.updateCircles();\n                this.buildCircleEvents();\n            }\n        }\n    }\n\n    buildOptions() {\n        if (this.options.height) {\n            this.selector.style.height = this.options.height;\n        }\n\n        this.autoplay();\n    }\n\n    buildSlideEvents() {\n        window.addEventListener('orientationchange', () => {\n            this.orientationChange();\n        });\n    }\n\n    buildSlides() {\n        const ul = this.selector.querySelector('ul');\n\n        ul.classList.add('fc-slides');\n\n        // Add the slide class to all child div elements\n        for (let index = 0; index < ul.children.length; index += 1) {\n            ul.children[index].classList.add('fc-slide');\n        }\n\n        // Wrap slides to reduce HTML markup\n        this.selector.innerHTML = `<div class=\"fc-container\">${this.selector.innerHTML}</div>`;\n\n        const slides = this.selector.querySelector('.fc-slides');\n        const allSlides = slides.querySelectorAll('.fc-slide');\n\n        this.slideAmount = allSlides.length;\n\n        if (this.options.slidesPerPage < this.slideAmount) {\n            this.slideWidth = 100 / this.options.slidesPerPage;\n\n            // Add the min-width CSS property to all slides\n            for (let index = 0; index < this.slideAmount; index += 1) {\n                allSlides[index].style.minWidth = `${this.slideWidth}%`;\n            }\n\n            if (this.options.infinite) {\n                // Clone and prepend/append slides\n                const array = Array.from(allSlides);\n                let prepend;\n                let append;\n\n                if (this.options.slidesPerPage >= this.options.slidesScrolling) {\n                    prepend = array.slice(this.slideAmount - this.options.slidesPerPage - 1, this.slideAmount).reverse();\n                    append = array.slice(0, this.options.slidesPerPage + 1);\n                } else {\n                    prepend = array.slice(this.slideAmount - this.options.slidesPerPage, this.slideAmount).reverse();\n                    append = array.slice(0, this.options.slidesPerPage);\n                }\n\n                for (let index = 0; index < prepend.length; index += 1) {\n                    const clone = prepend[index].cloneNode(true);\n                    clone.classList.add('fc-is-clone');\n                    slides.insertBefore(clone, slides.firstChild);\n                }\n\n                for (let index = 0; index < append.length; index += 1) {\n                    const clone = append[index].cloneNode(true);\n                    clone.classList.add('fc-is-clone');\n                    slides.appendChild(clone);\n                }\n            }\n\n            this.setTransform(this.getLeftPage(this.currentPage));\n        }\n\n        this.buildSlideEvents();\n    }\n\n    destroy() {\n        this.selector.querySelectorAll('.fc-slide.fc-is-clone').forEach((element) => {\n            this.selector.querySelector('.fc-slides').removeChild(element);\n        });\n\n        this.selector.querySelectorAll('.fc-slide').forEach((element) => {\n            element.removeAttribute('class');\n            element.removeAttribute('style');\n        });\n\n        this.selector.querySelector('.fc-slides').removeAttribute('style');\n        this.selector.querySelector('.fc-slides').removeAttribute('class');\n\n        if (this.options.circles) {\n            this.selector.querySelector('.fc-container').removeChild(this.selector.querySelector('.fc-circles'));\n        }\n\n        this.selector.innerHTML = this.selector.querySelector('.fc-container').innerHTML;\n\n        this.selector.className = this.selectorName.replace('.', '');\n        this.selector.removeAttribute('style');\n    }\n\n    getLeftPage(index) {\n        let slideOffset;\n\n        if (this.options.slidesPerPage < this.slideAmount) {\n            if (this.options.slidesPerPage >= this.options.slidesScrolling) {\n                slideOffset = (this.slideWidth * (this.options.slidesPerPage + 1)) * -1;\n            } else {\n                slideOffset = (this.slideWidth * this.options.slidesPerPage) * -1;\n            }\n\n            if (!this.options.infinite) {\n                slideOffset = 0;\n            }\n        }\n\n        return ((index * this.slideWidth) * -1) + slideOffset;\n    }\n\n    init() {\n        if (!this.selector.classList.contains('fc')) {\n            this.selector.classList.add('fc');\n            this.buildSlides();\n            this.buildArrows();\n            this.buildCircles();\n            this.buildOptions();\n            this.buildBreakpoints();\n        }\n    }\n\n    movePage(index) {\n        const unevenOffset = (this.slideAmount % this.options.slidesScrolling !== 0);\n        const indexOffset = unevenOffset ? 0 : (this.slideAmount - this.currentPage) % this.options.slidesScrolling;\n\n        if (index === 'previous') {\n            const slideOffset = indexOffset === 0 ? this.options.slidesScrolling : this.options.slidesPerPage - indexOffset;\n\n            if (this.options.slidesPerPage < this.slideAmount) {\n                this.slideController(this.currentPage - slideOffset);\n            }\n        } else if (index === 'next') {\n            const slideOffset = indexOffset === 0 ? this.options.slidesScrolling : indexOffset;\n\n            if (this.options.slidesPerPage < this.slideAmount) {\n                this.slideController(this.currentPage + slideOffset);\n            }\n        } else {\n            const page = index === 0 ? 0 : index * this.options.slidesScrolling;\n            this.slideController(page);\n        }\n\n        if (this.options.arrows) {\n            this.updateArrows();\n        }\n\n        if (this.options.circles) {\n            this.updateCircles();\n        }\n    }\n\n    orientationChange() {\n        this.updateResponsive();\n        this.setTransform();\n    }\n\n    reinit(options = {}) {\n        this.destroy();\n        this.options = FlexCarousel.extend(this.defaults, options);\n        this.init();\n    }\n\n    removeTransition() {\n        const slides = this.selector.querySelector('.fc-slides');\n\n        if (this.options.transition === 'slide') {\n            slides.style.transition = '';\n        }\n    }\n\n    setTransform(position) {\n        const slides = this.selector.querySelector('.fc-slides');\n        slides.style.transform = `translate3d(${Math.ceil(position)}%, 0px, 0px)`;\n    }\n\n    slideController(index) {\n        let nextPage;\n\n        if (index < 0) {\n            if (this.slideAmount % this.options.slidesScrolling !== 0) {\n                nextPage = this.slideAmount - (this.slideAmount % this.options.slidesScrolling);\n            } else {\n                nextPage = this.slideAmount + index;\n            }\n        } else if (index >= this.slideAmount) {\n            if (this.slideAmount % this.options.slidesScrolling !== 0) {\n                nextPage = 0;\n            } else {\n                nextPage = index - this.slideAmount;\n            }\n        } else {\n            nextPage = index;\n        }\n\n        this.currentPage = nextPage;\n        this.animatePage(this.getLeftPage(index));\n    }\n\n    updateArrows() {\n        const prevButton = this.options.appendArrows.querySelector('.fc-prev');\n        const nextButton = this.options.appendArrows.querySelector('.fc-next');\n\n        if (!this.options.infinite) {\n            if (this.currentPage === 0) {\n                prevButton.setAttribute('disabled', 'disabled');\n            } else {\n                prevButton.removeAttribute('disabled');\n            }\n\n            if (this.currentPage === this.slideAmount - 1) {\n                nextButton.setAttribute('disabled', 'disabled');\n            } else {\n                nextButton.removeAttribute('disabled');\n            }\n        }\n    }\n\n    updateCircles() {\n        const circles = this.selector.querySelector('.fc-container').querySelectorAll('.fc-circle');\n\n        for (let index = 0; index < circles.length; index += 1) {\n            circles[index].classList.remove('fc-is-active');\n        }\n\n        const index = Math.floor(this.currentPage / this.options.slidesScrolling);\n\n        circles[index].classList.add('fc-is-active');\n    }\n\n    updateResponsive() {\n        let targetBreakpoint;\n\n        this.breakpoints.forEach((options, breakpoint) => {\n            if (window.innerWidth >= breakpoint) {\n                targetBreakpoint = breakpoint;\n            }\n        });\n\n        if (targetBreakpoint) {\n            if (this.activeBreakpoint) {\n                if (targetBreakpoint !== this.activeBreakpoint) {\n                    this.activeBreakpoint = targetBreakpoint;\n                    this.reinit(this.breakpoints[targetBreakpoint]);\n                }\n            } else {\n                this.activeBreakpoint = targetBreakpoint;\n                this.reinit(this.breakpoints[targetBreakpoint]);\n            }\n        } else if (this.activeBreakpoint !== null) {\n            this.activeBreakpoint = null;\n            this.reinit(this.originalOptions);\n        }\n    }\n\n    static extend(defaults, options) {\n        const extended = {};\n\n        if (defaults) {\n            const keys = Object.keys(defaults);\n\n            keys.forEach((value) => {\n                if (Object.prototype.hasOwnProperty.call(defaults, value)) {\n                    extended[value] = defaults[value];\n                }\n            });\n        }\n\n        if (options) {\n            const keys = Object.keys(options);\n\n            keys.forEach((value) => {\n                if (Object.prototype.hasOwnProperty.call(options, value)) {\n                    extended[value] = options[value];\n                }\n            });\n        }\n\n        return extended;\n    }\n\n    static suffix(index) {\n        const j = index % 10;\n        const k = index % 100;\n\n        if (j === 1 && k !== 11) {\n            return `${index}st`;\n        }\n\n        if (j === 2 && k !== 12) {\n            return `${index}nd`;\n        }\n\n        if (j === 3 && k !== 13) {\n            return `${index}rd`;\n        }\n\n        return `${index}th`;\n    }\n}\n\nexport default FlexCarousel;\n"],"names":["FlexCarousel","selector","options","selectorName","toString","document","querySelector","defaults","appendArrows","arrows","arrowsOverlay","autoplay","autoplaySpeed","circles","circlesOverlay","height","infinite","initialPage","nextButton","prevButton","responsive","slidesPerPage","slidesScrolling","transition","transitionSpeed","activeBreakpoint","autoplayDirection","autoplayTimer","breakpoints","extend","originalOptions","slideAmount","slideWidth","currentPage","init","slides","style","target","addTransition","setTransform","Math","ceil","Promise","resolve","setTimeout","removeTransition","then","getLeftPage","pause","slide","clearInterval","setInterval","movePage","addEventListener","querySelectorAll","length","classList","add","createElement","setAttribute","innerHTML","appendChild","insertBefore","firstChild","buildArrowEvents","updateArrows","timer","window","clearTimeout","updateResponsive","previous","forEach","breakpoint","includes","push","buildBreakpointEvent","element","index","option","amount","li","circle","suffix","icon","text","updateCircles","buildCircleEvents","orientationChange","ul","children","allSlides","minWidth","array","Array","from","prepend","append","slice","reverse","clone","cloneNode","buildSlideEvents","removeChild","removeAttribute","className","replace","slideOffset","contains","buildSlides","buildArrows","buildCircles","buildOptions","buildBreakpoints","unevenOffset","indexOffset","slideController","page","destroy","position","transform","nextPage","animatePage","remove","floor","targetBreakpoint","innerWidth","reinit","extended","keys","Object","value","prototype","hasOwnProperty","call","j","k"],"mappings":"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"}